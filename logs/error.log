{"level":"error","message":"未找到标题为 \"ä¸å­å¨çæ é¢\" 的故事","timestamp":"2024-11-23T17:03:05.889Z"}
{"level":"error","message":"未找到标题为 \"ä¸å­å¨çæ é¢\" 的故事","timestamp":"2024-11-23T17:03:25.319Z"}
{"level":"error","message":"调用AI模型失败: aiService.queryModel is not a function","stack":"TypeError: aiService.queryModel is not a function\n    at /Users/baobinglei/TurtleGameWeb/app.js:126:42\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2024-11-23T18:29:04.577Z"}
{"code":"ERR_BAD_RESPONSE","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"测试\",\"answer\":\"测试\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"level":"error","message":"AI服务调用失败: Request failed with status code 505","name":"AxiosError","request":{"_closed":false,"_contentLength":"48","_defaultKeepAlive":true,"_ended":true,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 48\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":{"_currentRequest":"[Circular]","_currentUrl":"http://localhost:5555/api/query","_ended":true,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[],"_requestBodyLength":48,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":true,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":{"_consuming":false,"_dumped":false,"_events":{"end":[null,null]},"_eventsCount":4,"_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":true,"emittedReadable":false,"encoding":null,"endEmitted":true,"ended":true,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":false,"objectMode":false,"pipes":[],"readableListening":false,"reading":false,"readingMore":true,"resumeScheduled":false,"sync":true},"aborted":false,"client":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"complete":true,"httpVersion":"1.1","httpVersionMajor":1,"httpVersionMinor":1,"method":null,"rawHeaders":["date","Sat, 23 Nov 2024 19:30:52 GMT","server","uvicorn","content-length","46","content-type","application/json","Connection","close"],"rawTrailers":[],"redirects":[],"req":"[Circular]","responseUrl":"http://localhost:5555/api/query","socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"statusCode":505,"statusMessage":"HTTP Version Not Supported","upgrade":false,"url":""},"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"response":{"config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"测试\",\"answer\":\"测试\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"data":{"detail":"'NoneType' object is not callable"},"headers":{"connection":"close","content-length":"46","content-type":"application/json","date":"Sat, 23 Nov 2024 19:30:52 GMT","server":"uvicorn"},"request":{"_closed":false,"_contentLength":"48","_defaultKeepAlive":true,"_ended":true,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 48\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":{"_currentRequest":"[Circular]","_currentUrl":"http://localhost:5555/api/query","_ended":true,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[],"_requestBodyLength":48,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":true,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":{"_consuming":false,"_dumped":false,"_events":{"end":[null,null]},"_eventsCount":4,"_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":true,"emittedReadable":false,"encoding":null,"endEmitted":true,"ended":true,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":false,"objectMode":false,"pipes":[],"readableListening":false,"reading":false,"readingMore":true,"resumeScheduled":false,"sync":true},"aborted":false,"client":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"complete":true,"httpVersion":"1.1","httpVersionMajor":1,"httpVersionMinor":1,"method":null,"rawHeaders":["date","Sat, 23 Nov 2024 19:30:52 GMT","server","uvicorn","content-length","46","content-type","application/json","Connection","close"],"rawTrailers":[],"redirects":[],"req":"[Circular]","responseUrl":"http://localhost:5555/api/query","socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"statusCode":505,"statusMessage":"HTTP Version Not Supported","upgrade":false,"url":""},"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"status":505,"statusText":"HTTP Version Not Supported"},"stack":"AxiosError: Request failed with status code 505\n    at settle (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:2019:12)\n    at IncomingMessage.handleStreamEnd (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3135:11)\n    at IncomingMessage.emit (node:events:525:35)\n    at endReadableNT (node:internal/streams/readable:1359:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","status":505,"timestamp":"2024-11-23T19:30:53.056Z"}
{"level":"error","message":"查询提问失败: AI服务响应错误: 505","stack":"Error: AI服务响应错误: 505\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:30:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-23T19:30:53.061Z"}
{"code":"ERR_BAD_RESPONSE","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"测试\",\"answer\":\"测试\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"level":"error","message":"AI服务调用失败: Request failed with status code 505","name":"AxiosError","request":{"_closed":false,"_contentLength":"48","_defaultKeepAlive":true,"_ended":true,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 48\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":{"_currentRequest":"[Circular]","_currentUrl":"http://localhost:5555/api/query","_ended":true,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[],"_requestBodyLength":48,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":true,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":{"_consuming":false,"_dumped":false,"_events":{"end":[null,null]},"_eventsCount":4,"_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":true,"emittedReadable":false,"encoding":null,"endEmitted":true,"ended":true,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":false,"objectMode":false,"pipes":[],"readableListening":false,"reading":false,"readingMore":true,"resumeScheduled":false,"sync":true},"aborted":false,"client":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"complete":true,"httpVersion":"1.1","httpVersionMajor":1,"httpVersionMinor":1,"method":null,"rawHeaders":["date","Sat, 23 Nov 2024 19:38:10 GMT","server","uvicorn","content-length","46","content-type","application/json","Connection","close"],"rawTrailers":[],"redirects":[],"req":"[Circular]","responseUrl":"http://localhost:5555/api/query","socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"statusCode":505,"statusMessage":"HTTP Version Not Supported","upgrade":false,"url":""},"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"response":{"config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"测试\",\"answer\":\"测试\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"data":{"detail":"'NoneType' object is not callable"},"headers":{"connection":"close","content-length":"46","content-type":"application/json","date":"Sat, 23 Nov 2024 19:38:10 GMT","server":"uvicorn"},"request":{"_closed":false,"_contentLength":"48","_defaultKeepAlive":true,"_ended":true,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 48\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":{"_currentRequest":"[Circular]","_currentUrl":"http://localhost:5555/api/query","_ended":true,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"48","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[],"_requestBodyLength":48,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":true,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":{"_consuming":false,"_dumped":false,"_events":{"end":[null,null]},"_eventsCount":4,"_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":true,"emittedReadable":false,"encoding":null,"endEmitted":true,"ended":true,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":false,"objectMode":false,"pipes":[],"readableListening":false,"reading":false,"readingMore":true,"resumeScheduled":false,"sync":true},"aborted":false,"client":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"complete":true,"httpVersion":"1.1","httpVersionMajor":1,"httpVersionMinor":1,"method":null,"rawHeaders":["date","Sat, 23 Nov 2024 19:38:10 GMT","server","uvicorn","content-length","46","content-type","application/json","Connection","close"],"rawTrailers":[],"redirects":[],"req":"[Circular]","responseUrl":"http://localhost:5555/api/query","socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"statusCode":505,"statusMessage":"HTTP Version Not Supported","upgrade":false,"url":""},"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null],"timeout":[null,null]},"_eventsCount":7,"_hadError":false,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":false,"closed":false,"constructed":true,"dataEmitted":true,"decoder":null,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":false,"errored":null,"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":false,"emitClose":false,"ended":true,"ending":true,"errorEmitted":false,"errored":null,"finalCalled":true,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writecb":null,"writelen":0,"writing":false},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"status":505,"statusText":"HTTP Version Not Supported"},"stack":"AxiosError: Request failed with status code 505\n    at settle (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:2019:12)\n    at IncomingMessage.handleStreamEnd (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3135:11)\n    at IncomingMessage.emit (node:events:525:35)\n    at endReadableNT (node:internal/streams/readable:1359:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","status":505,"timestamp":"2024-11-23T19:38:10.591Z"}
{"level":"error","message":"查询提问失败: AI服务响应错误: 505","stack":"Error: AI服务响应错误: 505\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:30:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-23T19:38:10.596Z"}
{"level":"error","message":"获取故事标题失败: Operation `turtles.aggregate()` buffering timed out after 10000ms","stack":"MongooseError: Operation `turtles.aggregate()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:23)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)","timestamp":"2024-11-27T10:05:43.651Z"}
{"level":"error","message":"获取故事标题失败: Operation `turtles.aggregate()` buffering timed out after 10000ms","stack":"MongooseError: Operation `turtles.aggregate()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:23)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)","timestamp":"2024-11-27T10:05:45.911Z"}
{"level":"error","message":"数据库连接失败: AggregateError has an empty errors array. Please check the `cause` property for more information.","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"dbconn.sealoshzh.site:48061":{"$clusterTime":null,"address":"dbconn.sealoshzh.site:48061","arbiters":[],"electionId":null,"error":{},"hosts":[],"lastUpdateTime":1111741255,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Single"},"stack":"MongooseServerSelectionError: AggregateError has an empty errors array. Please check the `cause` property for more information.\n    at _handleConnectionErrors (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/connection.js:909:11)\n    at NativeConnection.openUri (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/connection.js:860:11)","timestamp":"2024-11-27T10:05:58.399Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"fahf\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"158","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5555","name":"Error","port":5555,"request":{"_currentRequest":{"_closed":false,"_contentLength":"158","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 158\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 158\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,97,104,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":394,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":394,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 158\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,97,104,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":394,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":394,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5555/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"158","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"158","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 158\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 158\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,97,104,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":394,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":394,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,97,104,102,34,125],"type":"Buffer"}}],"_requestBodyLength":158,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5555\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","syscall":"connect","timestamp":"2024-11-29T16:29:00.775Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-29T16:29:00.777Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"一个人接到一个电话，对方说'你已经死了'，然后挂断了。\",\"answer\":\"他接到了110报警电话。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"143","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5555","name":"Error","port":5555,"request":{"_currentRequest":{"_closed":false,"_contentLength":"143","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 143\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 143\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":379,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":379,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 143\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":379,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":379,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5555/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"143","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"143","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 143\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 143\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":379,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":379,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"}}],"_requestBodyLength":143,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5555\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","syscall":"connect","timestamp":"2024-11-29T16:29:54.086Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-29T16:29:54.092Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"一个人接到一个电话，对方说'你已经死了'，然后挂断了。\",\"answer\":\"他接到了110报警电话。\",\"query\":\"fs\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"144","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5555","name":"Error","port":5555,"request":{"_currentRequest":{"_closed":false,"_contentLength":"144","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 144\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 144\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":380,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":380,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 144\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":380,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":380,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5555/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"144","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"144","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 144\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 144\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":380,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":380,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,34,125],"type":"Buffer"}}],"_requestBodyLength":144,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5555\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","syscall":"connect","timestamp":"2024-11-29T16:32:08.056Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-29T16:32:08.062Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"一个人接到一个电话，对方说'你已经死了'，然后挂断了。\",\"answer\":\"他接到了110报警电话。\",\"query\":\"fsf\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"145","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5555","name":"Error","port":5555,"request":{"_currentRequest":{"_closed":false,"_contentLength":"145","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 145\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 145\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":381,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":381,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 145\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":381,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":381,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5555/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"145","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"145","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 145\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 145\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":381,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":381,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,230,142,165,229,136,176,228,184,128,228,184,170,231,148,181,232,175,157,239,188,140,229,175,185,230,150,185,232,175,180,39,228,189,160,229,183,178,231,187,143,230,173,187,228,186,134,39,239,188,140,231,132,182,229,144,142,230,140,130,230,150,173,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,230,142,165,229,136,176,228,186,134,49,49,48,230,138,165,232,173,166,231,148,181,232,175,157,227,128,130,34,44,34,113,117,101,114,121,34,58,34,102,115,102,34,125],"type":"Buffer"}}],"_requestBodyLength":145,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5555\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","syscall":"connect","timestamp":"2024-11-29T16:34:12.629Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-29T16:34:12.634Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5555","data":"{\"story\":\"一个人在餐厅吃早餐，看到对面的人在喝咖啡，突然尖叫着跑出去了。\",\"answer\":\"他在照镜子，发现对面的'人'其实是自己的倒影，但自己并没有在喝咖啡。\",\"query\":\"wrsf\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"230","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5555","name":"Error","port":5555,"request":{"_currentRequest":{"_closed":false,"_contentLength":"230","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 230\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 230\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,229,156,168,233,164,144,229,142,133,229,144,131,230,151,169,233,164,144,239,188,140,231,156,139,229,136,176,229,175,185,233,157,162,231,154,132,228,186,186,229,156,168,229,150,157,229,146,150,229,149,161,239,188,140,231,170,129,231,132,182,229,176,150,229,143,171,231,157,128,232,183,145,229,135,186,229,142,187,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,231,133,167,233,149,156,229,173,144,239,188,140,229,143,145,231,142,176,229,175,185,233,157,162,231,154,132,39,228,186,186,39,229,133,182,229,174,158,230,152,175,232,135,170,229,183,177,231,154,132,229,128,146,229,189,177,239,188,140,228,189,134,232,135,170,229,183,177,229,185,182,230,178,161,230,156,137,229,156,168,229,150,157,229,146,150,229,149,161,227,128,130,34,44,34,113,117,101,114,121,34,58,34,119,114,115,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":466,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":466,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 230\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,229,156,168,233,164,144,229,142,133,229,144,131,230,151,169,233,164,144,239,188,140,231,156,139,229,136,176,229,175,185,233,157,162,231,154,132,228,186,186,229,156,168,229,150,157,229,146,150,229,149,161,239,188,140,231,170,129,231,132,182,229,176,150,229,143,171,231,157,128,232,183,145,229,135,186,229,142,187,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,231,133,167,233,149,156,229,173,144,239,188,140,229,143,145,231,142,176,229,175,185,233,157,162,231,154,132,39,228,186,186,39,229,133,182,229,174,158,230,152,175,232,135,170,229,183,177,231,154,132,229,128,146,229,189,177,239,188,140,228,189,134,232,135,170,229,183,177,229,185,182,230,178,161,230,156,137,229,156,168,229,150,157,229,146,150,229,149,161,227,128,130,34,44,34,113,117,101,114,121,34,58,34,119,114,115,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":466,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":466,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5555/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"230","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5555:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"230","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 230\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 230\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5555\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,229,156,168,233,164,144,229,142,133,229,144,131,230,151,169,233,164,144,239,188,140,231,156,139,229,136,176,229,175,185,233,157,162,231,154,132,228,186,186,229,156,168,229,150,157,229,146,150,229,149,161,239,188,140,231,170,129,231,132,182,229,176,150,229,143,171,231,157,128,232,183,145,229,135,186,229,142,187,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,231,133,167,233,149,156,229,173,144,239,188,140,229,143,145,231,142,176,229,175,185,233,157,162,231,154,132,39,228,186,186,39,229,133,182,229,174,158,230,152,175,232,135,170,229,183,177,231,154,132,229,128,146,229,189,177,239,188,140,228,189,134,232,135,170,229,183,177,229,185,182,230,178,161,230,156,137,229,156,168,229,150,157,229,146,150,229,149,161,227,128,130,34,44,34,113,117,101,114,121,34,58,34,119,114,115,102,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5555,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":466,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":466,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5555","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,229,156,168,233,164,144,229,142,133,229,144,131,230,151,169,233,164,144,239,188,140,231,156,139,229,136,176,229,175,185,233,157,162,231,154,132,228,186,186,229,156,168,229,150,157,229,146,150,229,149,161,239,188,140,231,170,129,231,132,182,229,176,150,229,143,171,231,157,128,232,183,145,229,135,186,229,142,187,228,186,134,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,231,133,167,233,149,156,229,173,144,239,188,140,229,143,145,231,142,176,229,175,185,233,157,162,231,154,132,39,228,186,186,39,229,133,182,229,174,158,230,152,175,232,135,170,229,183,177,231,154,132,229,128,146,229,189,177,239,188,140,228,189,134,232,135,170,229,183,177,229,185,182,230,178,161,230,156,137,229,156,168,229,150,157,229,146,150,229,149,161,227,128,130,34,44,34,113,117,101,114,121,34,58,34,119,114,115,102,34,125],"type":"Buffer"}}],"_requestBodyLength":230,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5555\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","syscall":"connect","timestamp":"2024-11-29T16:36:53.431Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-29T16:36:53.437Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"}}],"_requestBodyLength":155,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","syscall":"connect","timestamp":"2024-11-29T16:39:40.214Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:130:24","timestamp":"2024-11-29T16:39:40.220Z"}
{"level":"error","message":"数据库连接失败: AggregateError has an empty errors array. Please check the `cause` property for more information.","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"dbconn.sealoshzh.site:48061":{"$clusterTime":null,"address":"dbconn.sealoshzh.site:48061","arbiters":[],"electionId":null,"error":{},"hosts":[],"lastUpdateTime":2030930328,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Single"},"stack":"MongooseServerSelectionError: AggregateError has an empty errors array. Please check the `cause` property for more information.\n    at _handleConnectionErrors (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/connection.js:909:11)\n    at NativeConnection.openUri (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/connection.js:860:11)","timestamp":"2025-01-14T08:35:20.536Z"}
{"level":"error","message":"数据库连接失败: AggregateError has an empty errors array. Please check the `cause` property for more information.","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"dbconn.sealoshzh.site:48061":{"$clusterTime":null,"address":"dbconn.sealoshzh.site:48061","arbiters":[],"electionId":null,"error":{},"hosts":[],"lastUpdateTime":2046332983,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Single"},"stack":"MongooseServerSelectionError: AggregateError has an empty errors array. Please check the `cause` property for more information.\n    at _handleConnectionErrors (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/connection.js:909:11)\n    at NativeConnection.openUri (/Users/baobinglei/TurtleGameWeb/node_modules/mongoose/lib/connection.js:860:11)","timestamp":"2025-01-14T12:52:03.516Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"你好\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"160","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"160","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,228,189,160,229,165,189,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,228,189,160,229,165,189,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"160","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"160","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,228,189,160,229,165,189,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,228,189,160,229,165,189,34,125],"type":"Buffer"}}],"_requestBodyLength":160,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T12:53:34.453Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T12:53:34.459Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"弄好\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"160","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"160","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,229,188,132,229,165,189,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,229,188,132,229,165,189,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"160","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"160","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,229,188,132,229,165,189,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,229,188,132,229,165,189,34,125],"type":"Buffer"}}],"_requestBodyLength":160,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T12:58:41.514Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T12:58:41.517Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"nohao1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"160","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"160","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,110,111,104,97,111,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,110,111,104,97,111,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"160","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"160","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 160\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,110,111,104,97,111,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":396,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":396,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,110,111,104,97,111,49,34,125],"type":"Buffer"}}],"_requestBodyLength":160,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T13:02:36.514Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:02:36.527Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"111\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"157","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"157","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 157\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 157\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,49,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":393,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":393,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 157\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,49,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":393,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":393,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"157","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"157","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 157\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 157\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,49,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":393,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":393,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,49,49,34,125],"type":"Buffer"}}],"_requestBodyLength":157,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T13:10:46.004Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:10:46.007Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"}}],"_requestBodyLength":155,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T13:11:46.789Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:11:46.792Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"}}],"_requestBodyLength":155,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T13:15:11.670Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:15:11.681Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"}}],"_requestBodyLength":155,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T13:17:37.151Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:17:37.153Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"}}],"_requestBodyLength":155,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T13:21:07.566Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:21:07.569Z"}
{"address":"::1","cause":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"errno":-61,"level":"error","message":"AI服务调用失败: connect ECONNREFUSED ::1:5111","name":"Error","port":5111,"request":{"_currentRequest":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":"[Circular]","_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000},"strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_currentUrl":"http://localhost:5111/api/query","_ended":false,"_ending":true,"_events":{"socket":[null,null]},"_eventsCount":3,"_options":{"agents":{},"beforeRedirects":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"hostname":"localhost","maxBodyLength":null,"maxRedirects":21,"method":"POST","nativeProtocols":{"http:":{"METHODS":["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],"STATUS_CODES":{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"},"globalAgent":{"_events":{},"_eventsCount":2,"defaultPort":80,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"http:","requests":{},"scheduling":"lifo","sockets":{"localhost:5111:":[{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"connect":[null,null,null],"timeout":[null,null]},"_eventsCount":8,"_hadError":true,"_host":"localhost","_httpMessage":{"_closed":false,"_contentLength":"155","_defaultKeepAlive":true,"_ended":false,"_events":{},"_eventsCount":7,"_hasBody":true,"_header":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","_headerSent":true,"_keepAliveTimeout":0,"_last":true,"_redirectable":"[Circular]","_removedConnection":false,"_removedContLen":false,"_removedTE":false,"_trailer":"","aborted":false,"agent":"[Circular]","chunkedEncoding":false,"destroyed":false,"finished":false,"host":"localhost","maxHeadersCount":null,"maxRequestsOnConnectionReached":false,"method":"POST","outputData":[],"outputSize":0,"parser":null,"path":"/api/query","protocol":"http:","res":null,"reusedSocket":false,"sendDate":false,"shouldKeepAlive":false,"socket":"[Circular]","strictContentLength":false,"timeoutCb":null,"upgradeOrConnect":false,"useChunkedEncodingByDefault":true,"writable":true},"_parent":null,"_pendingData":[{"chunk":"POST /api/query HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.7.7\r\nContent-Length: 155\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:5111\r\nConnection: close\r\n\r\n","encoding":"latin1"},{"chunk":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"},"encoding":"buffer"}],"_pendingEncoding":"","_readableState":{"autoDestroy":true,"awaitDrainWriters":null,"buffer":{"head":null,"length":0,"tail":null},"closeEmitted":true,"closed":true,"constructed":true,"dataEmitted":false,"decoder":null,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"emittedReadable":false,"encoding":null,"endEmitted":false,"ended":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"flowing":true,"highWaterMark":16384,"length":0,"multiAwaitDrain":false,"needReadable":true,"objectMode":false,"pipes":[],"readableListening":false,"reading":true,"readingMore":false,"resumeScheduled":false,"sync":false},"_server":null,"_sockname":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":true,"closed":true,"constructed":true,"corked":0,"decodeStrings":false,"defaultEncoding":"utf8","destroyed":true,"emitClose":false,"ended":false,"ending":false,"errorEmitted":true,"errored":{"address":"::1","code":"ECONNREFUSED","errno":-61,"port":5111,"syscall":"connect"},"finalCalled":false,"finished":false,"highWaterMark":16384,"length":391,"needDrain":false,"objectMode":false,"pendingcb":1,"prefinished":false,"sync":false,"writelen":391,"writing":true},"allowHalfOpen":false,"connecting":false,"parser":null,"server":null,"timeout":30000}]},"totalSocketCount":1},"maxHeaderSize":16384},"https:":{"globalAgent":{"_events":{},"_eventsCount":2,"_sessionCache":{"list":[],"map":{}},"defaultPort":443,"freeSockets":{},"keepAlive":false,"keepAliveMsecs":1000,"maxCachedSessions":100,"maxFreeSockets":256,"maxSockets":null,"maxTotalSockets":null,"options":{"noDelay":true,"path":null},"protocol":"https:","requests":{},"scheduling":"lifo","sockets":{},"totalSocketCount":0}}},"path":"/api/query","pathname":"/api/query","port":"5111","protocol":"http:"},"_redirectCount":0,"_redirects":[],"_requestBodyBuffers":[{"data":{"data":[123,34,115,116,111,114,121,34,58,34,228,184,128,228,184,170,228,186,186,231,130,185,228,186,134,228,184,128,228,187,189,231,137,185,230,174,138,231,154,132,230,153,154,233,164,144,239,188,140,229,144,131,229,174,140,229,144,142,232,175,180,39,230,136,145,229,134,141,228,185,159,228,184,141,228,188,154,231,130,185,232,191,153,228,184,170,228,186,134,39,227,128,130,34,44,34,97,110,115,119,101,114,34,58,34,228,187,150,229,156,168,230,173,187,229,136,145,229,137,141,229,144,131,230,156,128,229,144,142,228,184,128,233,161,191,233,165,173,227,128,130,34,44,34,113,117,101,114,121,34,58,34,49,34,125],"type":"Buffer"}}],"_requestBodyLength":155,"_timeout":null,"_writableState":{"afterWriteTickInfo":null,"allBuffers":true,"allNoop":true,"autoDestroy":true,"bufferProcessing":false,"buffered":[],"bufferedIndex":0,"closeEmitted":false,"closed":false,"constructed":true,"corked":0,"decodeStrings":true,"defaultEncoding":"utf8","destroyed":false,"emitClose":true,"ended":false,"ending":false,"errorEmitted":false,"errored":null,"finalCalled":false,"finished":false,"highWaterMark":16384,"length":0,"needDrain":false,"objectMode":false,"pendingcb":0,"prefinished":false,"sync":true,"writecb":null,"writelen":0,"writing":false}},"stack":"Error: connect ECONNREFUSED ::1:5111\n    at AxiosError.from (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:876:14)\n    at RedirectableRequest.handleRequestError (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:3156:25)\n    at RedirectableRequest.emit (node:events:525:35)\n    at eventHandlers.<computed> (/Users/baobinglei/TurtleGameWeb/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:513:28)\n    at Socket.socketErrorListener (node:_http_client:502:9)\n    at Socket.emit (node:events:513:28)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (/Users/baobinglei/TurtleGameWeb/node_modules/axios/dist/node/axios.cjs:4287:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:18:24)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","syscall":"connect","timestamp":"2025-01-14T13:21:11.853Z"}
{"level":"error","message":"查询提问失败: AI服务无响应","stack":"Error: AI服务无响应\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:33:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:21:11.858Z"}
{"baseURL":"http://localhost:5111","code":"ECONNREFUSED","config":{"adapter":["xhr","http","fetch"],"baseURL":"http://localhost:5111","data":"{\"story\":\"一个人点了一份特殊的晚餐，吃完后说'我再也不会点这个了'。\",\"answer\":\"他在死刑前吃最后一顿饭。\",\"query\":\"1\"}","env":{},"headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"gzip, compress, deflate, br","Content-Length":"155","Content-Type":"application/json","User-Agent":"axios/1.7.7"},"maxBodyLength":-1,"maxContentLength":-1,"method":"post","timeout":30000,"transformRequest":[null],"transformResponse":[null],"transitional":{"clarifyTimeoutError":false,"forcedJSONParsing":true,"silentJSONParsing":true},"url":"/api/query","xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN"},"error":"connect ECONNREFUSED ::1:5111","level":"error","message":"AI服务调用失败:","timestamp":"2025-01-14T13:24:06.110Z"}
{"level":"error","message":"查询提问失败: AI服务无响应: connect ECONNREFUSED ::1:5111","stack":"Error: AI服务无响应: connect ECONNREFUSED ::1:5111\n    at AIService.queryModel (/Users/baobinglei/TurtleGameWeb/services/aiService.js:47:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/baobinglei/TurtleGameWeb/app.js:81:24","timestamp":"2025-01-14T13:24:06.112Z"}
